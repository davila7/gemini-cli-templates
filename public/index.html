<!DOCTYPE html>
<html>
<head>
  <title>Gemini CLI Analytics Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="header">
    <div class="header-left">
      <div class="status-dot"></div>
      <div>
        <h1>Gemini CLI Analytics Dashboard</h1>
        <div class="version">v1.0.0</div>
        <div class="header-subtitle">Real-time monitoring and analytics for Gemini CLI sessions</div>
        <div class="header-subtitle" id="last-update">last update: <span id="timestamp"></span></div>
      </div>
    </div>
    <div class="header-right">
      <div class="header-actions">
        <button class="btn" id="theme-toggle">üåô Dark</button>
        <a class="btn" href="https://github.com/davila7/gemini-cli-templates" target="_blank">‚≠ê Star on GitHub</a>
      </div>
    </div>
  </div>
  
  <div class="container">
    <!-- Controls Section -->
    <div style="display: flex; justify-content: flex-end; margin-bottom: 24px; gap: 12px;">
      <button class="btn" id="refresh-btn">üîÑ Refresh</button>
      <button class="btn" id="export-btn">üìä Export</button>
    </div>

    <!-- Main Metrics Grid -->
    <div class="metrics-grid" id="main-metrics">
      <div class="metric-card">
        <div class="metric-header">
          <div class="metric-title">Total Sessions</div>
        </div>
        <div class="metric-value" id="total-sessions">0</div>
        <div class="metric-details">
          <div class="metric-detail-row">
            <span class="metric-detail-label">This Week:</span>
            <span class="metric-detail-value" id="sessions-week">0</span>
          </div>
          <div class="metric-detail-row">
            <span class="metric-detail-label">Active:</span>
            <span class="metric-detail-value" id="sessions-active">0</span>
          </div>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-header">
          <div class="metric-title">Total Tools</div>
        </div>
        <div class="metric-value" id="total-tools">0</div>
        <div class="metric-details">
          <div class="metric-detail-row">
            <span class="metric-detail-label">This Week:</span>
            <span class="metric-detail-value" id="tools-week">0</span>
          </div>
          <div class="metric-detail-row">
            <span class="metric-detail-label">Success Rate:</span>
            <span class="metric-detail-value" id="tools-success">0%</span>
          </div>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-header">
          <div class="metric-title">Total Tokens</div>
        </div>
        <div class="metric-value" id="total-tokens">0</div>
        <div class="metric-details">
          <div class="metric-detail-row">
            <span class="metric-detail-label">Input:</span>
            <span class="metric-detail-value" id="tokens-input">0</span>
          </div>
          <div class="metric-detail-row">
            <span class="metric-detail-label">Output:</span>
            <span class="metric-detail-value" id="tokens-output">0</span>
          </div>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-header">
          <div class="metric-title">Total API Calls</div>
        </div>
        <div class="metric-value" id="total-apis">0</div>
        <div class="metric-details">
          <div class="metric-detail-row">
            <span class="metric-detail-label">Avg Duration:</span>
            <span class="metric-detail-value" id="api-duration">0ms</span>
          </div>
          <div class="metric-detail-row">
            <span class="metric-detail-label">Success Rate:</span>
            <span class="metric-detail-value" id="api-success">0%</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Current Session -->
    <div class="current-session" id="current-session" style="display: none;">
      <div class="session-header">
        <div class="session-title">Current Session</div>
        <div class="session-status">
          <div class="status-badge">
            <span>‚óè</span>
            <span>Active</span>
          </div>
        </div>
      </div>
      <div class="session-detail" id="session-detail">Session ID: Loading...</div>
      <div class="session-progress">
        <div class="progress-bar">
          <div class="progress-fill" id="session-progress" style="width: 0%"></div>
        </div>
        <div class="progress-text">
          <span id="session-time">0h 0m remaining</span>
          <span id="session-estimate">0/0 est.</span>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="tabs">
      <button class="tab-button active" data-tab="overview">Overview</button>
      <button class="tab-button" data-tab="traces">Traces</button>
    </div>
    
    <div id="overview" class="tab-content active">
      <div id="metrics-content" class="loading">Loading metrics...</div>
      <div class="metric-card" style="margin-top: 24px;">
        <div class="metric-header">
          <div class="metric-title">Token Usage</div>
        </div>
        <canvas id="token-chart"></canvas>
      </div>
    </div>
    
    <div id="traces" class="tab-content">
      <div id="traces-content"></div>
    </div>
  </div>

  <script src="js/api.js" type="module"></script>
  <script src="js/ui.js" type="module"></script>
  <script src="js/app.js" type="module"></script>
</body>
</html>